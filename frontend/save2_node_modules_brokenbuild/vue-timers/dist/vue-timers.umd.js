!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports):"function"==typeof define&&define.amd?define(["exports"],i):i(t.vueTimers={})}(this,function(t){"use strict";var i=function(t,i,n){var r=e({},n);return r[t]=i,r},e=Object.assign||function(t){for(var i=1;i<arguments.length;i+=1){var e=arguments[i];for(var n in e)t[n]=e[n]}return t},n=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function r(t,i){return(t.repeat?setInterval:setTimeout)(function(){i.$emit("timer-tick:"+t.name),t.callback()},t.time)}function s(t,i){return{name:t.name,time:t.time||0,repeat:"repeat"in t&&t.repeat,immediate:"immediate"in t&&t.immediate,autostart:"autostart"in t&&t.autostart,isSwitchTab:"isSwitchTab"in t&&t.isSwitchTab,callback:t.callback&&t.callback.bind(i)||i[t.name]}}var o={data:function(){return this.$options.timers?(this.$options.timers=(t=this.$options.timers,e=this,n(t)?t.reduce(function(t,n){return i(n.name,s(n,e),t)},{}):Object.keys(t).reduce(function(n,r){return i(r,s(i("name",r,t[r]),e),n)},{})),{timers:(r=this.$options.timers,Object.keys(r).reduce(function(t,e){return i(e,{isRunning:!1,time:r[e].time||0,instance:null},t)},{}))}):{};var t,e,r},created:function(){if(this.$options.timers){var t=this,e=t.timers,n=t.$options.timers;t.$timer={start:function(s){e[s].isRunning||(e[s].isRunning=!0,e[s].instance=r(i("time",e[s].time,n[s]),t),n[s].immediate&&(t.$emit("timer-tick:"+s),n[s].callback()),t.$emit("timer-start:"+s))},stop:function(i){e[i].isRunning&&((n[i].repeat?clearInterval:clearTimeout)(e[i].instance),e[i].isRunning=!1,t.$emit("timer-stop:"+i))},restart:function(i){this.stop(i),this.start(i),t.$emit("timer-restart:"+i)}}}},mounted:function(){if(this.$options.timers){var t=this,i=t.$options.timers;Object.keys(i).forEach(function(e){i[e].autostart&&t.$timer.start(e)})}},activated:function(){if(this.$options.timers){var t=this,i=t.timers,e=t.$options.timers;Object.keys(e).forEach(function(n){e[n].isSwitchTab&&i[n].instance&&t.$timer.start(n)})}},deactivated:function(){if(this.$options.timers){var t=this,i=t.timers,e=t.$options.timers;Object.keys(e).forEach(function(n){e[n].isSwitchTab&&i[n].instance&&t.$timer.stop(n)})}},beforeDestroy:function(){if(this.$options.timers){var t=this;Object.keys(t.$options.timers).forEach(function(i){t.$timer.stop(i)})}}};function a(t){t.config.optionMergeStrategies.timers=t.config.optionMergeStrategies.methods,t.mixin(o)}"undefined"!=typeof window&&window.Vue&&a(window.Vue);var c=o;t.default=a,t.timer=function(t,i,n){return e({name:t,time:i},n)},t.mixin=c,Object.defineProperty(t,"__esModule",{value:!0})});
